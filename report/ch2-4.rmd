---
title: "Section 2.4 Drug-resistant TB: treatment and treatment coverage"
author: "Takuya Yamanaka"
date: "`r Sys.Date()`"
knit: (function(inputFile, encoding) {
      out_dir <- "./local";
      rmarkdown::render(inputFile,
                        encoding=encoding,
                        output_dir=file.path(dirname(inputFile), out_dir))})
output: 
  html_fragment:
    # Do not include a table of contents
    toc: no
    # Set standard figure width to 12 inches
    fig_width: 12
    # Do not write figure captions
    fig_caption: FALSE
    # to save intermediate .png
    keep_md: FALSE
    # Don't embed external resources (stylesheets, JS libraries) in the output 
    self_contained: False  
    # Don't include <div> tags around a header and the content found until the next header
    section_divs: FALSE  
 
---


```{r setup, include=FALSE}
# Set chunk options.
# Results "asis" is useful to output markdown from a function
# Suppress messages, warnings and also the ## at the beginning of printed text

knitr::opts_chunk$set(echo = FALSE, 
                      results = "asis",
                      message = FALSE,
                      warning = FALSE,
                      error = TRUE)  # TEMP error=TRUE for debugging!

# Kill any attempt at using factors, unless we explicitly want them!
options(stringsAsFactors=FALSE)

# Load output packages ----
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
library(ggplot2)
library(dplyr)
library(scales)
library(RColorBrewer)
library(whomap)
library(gtbreport)
library(here)
library(readr)

# Load R functions ----
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
source(here("report/functions/html_links.R"))
source(here("report/functions/output_ggplot.R"))

# Get the data sets and computed values/statistics for section 2.1 ----
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
source(here('report/ch2-4_prepare_data.r'))

# Show static chart in addition to Kendo chart?
show_static = F

# Save underlying data files as CSV and charts as PDF files?
pdf_csv_folder = here::here("report/local/figures/ch2.4")
save_csv = TRUE
save_pdf = TRUE

# Create the output folder (only if it doesn't yet exist)
dir.create(pdf_csv_folder, showWarnings = FALSE, recursive = TRUE)

```


```{r css_js}
# Add standard stylesheets and javascript to support kendo
cat(writeLines(readLines(here("report/resources/headers.htm"))))
```

# 2.4 Drug-resistant TB: treatment enrolment, coverage and outcomes  

<span class="red">**Draft! Prepared `r Sys.Date()` using country-reported data snapshot files from `r format(as.Date(snapshot_date), format="%d %B %Y")`!**</span>

People with drug-resistant TB (DR-TB) need treatment with regimens that include second-line drugs, such as bedaquiline and fluoroquinolones (`r ref_lnk("1")`). WHO recommends different regimens for rifampicin-resistant TB (RR-TB) or multidrug-resistant TB (MDR-TB, defined as resistance to both rifampicin and isoniazid); isoniazid-resistant TB; pre-extensively drug-resistant TB (pre-XDR-TB, defined as TB that is resistant to rifampicin and any fluoroquinolone) and XDR-TB (resistance to rifampicin, any fluoroquinolone and at least one of bedaquiline or linezolid). These regimens are more expensive (US\$&nbsp;400&#8211;600 based on prices quoted by the Global TB Drug Facility) compared with first-line treatments for drug-susceptible TB (around US\$&nbsp;50 per person) (`r ref_lnk("2")`). They also cause more adverse events. 

Since 2018, WHO has recommended all-oral regimens for the treatment of MDR/RR-TB, a landmark advance compared with previous regimens that included injectable agents (`r ref_lnk("1")`). The latest recommendations for treatment of drug-resistant TB include three major categories of regimen (`r ref_lnk("3,4")`). The first category consists of two 6-month all-oral regimens for people with MDR/RR-TB (with or without resistance to fluoroquinolones). The second category includes several all-oral short regimens of 9 months for people with MDR/RR-TB who do not have any resistance to fluoroquinolones. The third category includes longer regimens of 18--20 months that may include an injectable drug (amikacin). The 6-month regimens are prioritized for use while the longest regimens are a last resort.  


Globally in `r report_year-1`, `r int_spacer(f2.4.1_txt$rr_2023)` people were enrolled on treatment for MDR/RR-TB. This was a small decrease from `r int_spacer(f2.4.1_txt$rr_2022)` in `r report_year-2` (`r round(f2.4.1_txt$pct_increase_2322,1)`%). Most of those enrolled on treatment were people aged &#8805;15 years (`r lnk("Fig. 2.4.1")`). 

### `r anch("Fig. 2.4.1")`<span class="red">Fig. 2.4.1</span> The global number of people reported to have been enrolled on treatment for MDR/RR-TB, 2010&#8211;`r report_year-1`
<div class="subhead">Global data disaggregated by age are not available for the years before 2018.</div>

```{r fig_2.4.1, fig.alt="Bar chart of numbers treated for MDR-TB each year since 2010"}

f2.4.1_plot <- f2.4.1b_data %>% 
  
  ggplot(aes(x=year, y=how_many)) +
  geom_line(aes(color=age_group), size=2) +
  
  facet_wrap( ~ age_group, ncol = 3, scales="free") + expand_limits(y = 0) +
  
  geom_blank(aes(y = y_upper_limit)) +
  
  scale_x_continuous(name="Year",
                     breaks = seq(0, report_year-1, by = 2)) +
  
  scale_colour_manual(values = c("#A5D727", palette_gtb("succ"), "red")) +
  
  # display y-axis scale in millions
  scale_y_continuous(name = "Thousands", labels = function(i){round(i/1e3)}) +
  
  theme_gtb()  +
  
  # Get rid of annoying x-axis line and ticks
  theme(axis.line.x = ggplot2::element_blank(),
        axis.ticks.x = element_blank(),
        legend.position = "none")


output_ggplot(f2.4.1_plot, f2.4.1_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```
<div class="row">
<div class="col-md-4">
  <div id="fig_2_4_1_all"></div>
</div>

<div class="col-md-4">
  <div id="fig_2_4_1_adult"></div>
</div>	

<div class="col-md-4">
  <div id="fig_2_4_1_children"></div>
</div>	
</div>
<div id="fig_2_4_1"></div>

<hr />
<br />

Trends in the numbers of people newly diagnosed with RR-TB or MDR-TB (MDR/RR-TB) and enrolled on treatment for MDR/RR-TB between 2010 and `r report_year-1` vary considerably among the 30 high MDR/RR-TB burden countries (`r lnk("Fig. 2.4.2")`). In general, treatment enrolments are close to the numbers of people newly diagnosed.

### `r anch("Fig. 2.4.2")`<span class="red">Fig. 2.4.2</span> Number of people diagnosed with MDR/RR-TB<span style="color:#277abe;"> (blue)</span> and enrolled on treatment for MDR/RR-TB <span style="color:red;"> (red)</span>, 2010&#8211;`r report_year-1`, 30 high MDR/RR-TB burden countries^a^

```{r fig_2.4.2, fig.alt="Panel of line charts of MDR/RR-TB cases detected, MDR/RR-TB put on treatment since 2010 for 30 countries", fig.height=12}

f2.4.2_plot <- f2.4.2_data %>%
  
  ggplot(aes(x=year, y=rr_detected, ymin=0)) +
  
  geom_line(size=1, colour = "#277abe") +
  
  geom_line(aes(year, rr_treated),
                      size=1,
                      colour="Red") +
  
  facet_wrap( ~ country, 
              ncol = 5, 
              scales="free_y",
              # Use the labeller function to make sure long country names are wrapped in panel headers
              labeller = label_wrap_gen(width = 20)) +

  scale_x_continuous(name = "Year", breaks = c(2010, 2015, report_year-1)) +
  
  scale_y_continuous(name = "Number per year",
                     labels = int_spacer) + 
  
  theme_gtb()  +
  
  # Get rid of annoying x-axis line and ticks
  theme(axis.line.x = ggplot2::element_blank(),
        axis.ticks.x = element_blank())


output_ggplot(f2.4.2_plot, f2.4.2_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_AGO"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_AZE"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_BGD"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_BLR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_CHN"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_PRK"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_COD"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_IND"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_IDN"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_KAZ"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_KGZ"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_MNG"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_MOZ"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_MMR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_NPL"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_NGA"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_PAK"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_PNG"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_PER"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_PHL"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_MDA"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_RUS"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_SOM"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_ZAF"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_TJK"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_UKR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_UZB"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_2_VNM"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_ZMB"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_2_ZWE"></div>
</div>
</div>

<div class="footnote">^a^ Enrolments were slightly higher than new diagnoses in `r f2.4.2_txt %>% nrow()` countries. Possible explanations include enrolment of people diagnosed in previous years and enrolment of the same person on more than one treatment regimen within a 1-year period (for example due to adverse events).</div>

<hr />
<br />


The numbers of people being detected with MDR/RR-TB and enrolled on treatment fall far short of the estimated number of people developing MDR/RR-TB (incident cases) each year (`r lnk("Fig. 2.4.3")`). Closing the gap requires improvements in overall detection of people with TB (<span class="red">Section 2.3</span>), improvements in the percentage of those diagnosed with TB who are bacteriologically confirmed (necessary to test for drug resistance) and improvements in the coverage of testing for RR-TB (<span class="red">Section 2.2</span>).

### `r anch("Fig. 2.4.3")`<span class="red">Fig. 2.4.3</span> Number of people diagnosed with MDR/RR-TB<span style="color:#277abe;"> (blue)</span> and number enrolled on MDR/RR-TB treatment<span style="color:red;"> (red)</span>, compared with estimates of the number of incident cases of MDR/RR-TB (95% uncertainty interval shown in <span style="color:`r gtbreport::palette_gtb("inc")`">green</span>), 2015&#8211;`r report_year-1`,^a^ globally and for WHO regions  

```{r fig_2.4.3, fig.width=14, fig.height=6, eval=show_estimates}
f2.4.3_plot <- f2.4.3_data %>% 
  
  ggplot(aes(x=year, y=rr_detected, ymin=0)) +
  
  geom_line(size=1, colour = "#277abe") +
  
  geom_line(aes(year, rr_treated),
            size=1,
            colour="Red") +
  
  geom_ribbon(aes(x=year, 
                  ymin=e_inc_rr_num_lo, 
                  ymax=e_inc_rr_num_hi),
              fill=gtbreport::palette_gtb("inc"),
              alpha=0.4) +
  
  geom_line(aes(year, e_inc_rr_num),
            size=1,
            colour=gtbreport::palette_gtb("inc")) +
  
  facet_wrap( ~ entity, ncol = 4, scales="free_y") +
  
  scale_x_continuous(name="Year"#,
                     # breaks = c(2015, report_year-1, by=2)
                     ) +
  
  # display y-axis scale in millions
  scale_y_continuous(name = "Number per year",labels=function(x) format(x, big.mark = " ", scientific = FALSE)) +
  # scale_y_continuous(name = "Per year", 
  #                    # Use the remainder operator in the labeller function to make sure we don't get weird effects
  #                    # when plotting small numbers
  #                    labels = function(i){ifelse((i/1e6) %% 1 == 0, round(i/1e6), round(i/1e6, 1))}) +
  
  theme_gtb()  +
  
  # Get rid of annoying x-axis line and ticks
  theme(axis.line.x = ggplot2::element_blank(),
        axis.ticks.x = element_blank())

output_ggplot(f2.4.3_plot, f2.4.3_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```
<div id="fig_2_4_3_global"></div>

<div class="row">
<div class="col-md-4">
<div id="fig_2_4_3_afro"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_3_amro"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_3_searo"></div>
</div>
</div>

<div class="row">
<div class="col-md-4">
<div id="fig_2_4_3_euro"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_3_emro"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_3_wpro"></div>
</div>
</div>
<div class="footnote">^a^ The time period corresponds to the period for which estimates of the incidence of MDR/RR-TB are available (see <span class="red">Section 1.3</span>).</div>

<hr />
<br />

Estimated levels of treatment coverage for MDR/RR-TB, approximated as the number of people enrolled on treatment for MDR-TB in a given year divided by the estimated number of people who developed MDR/RR-TB (incident cases) in the same year and expressed as a percentage, remain low: globally, `r ftb(f2.4.4_txt$c_rr_coverage)`% in `r report_year-1` (`r lnk("Fig. 2.4.4")`). The WHO region with the highest level of treatment coverage in `r report_year-1` was `r gsub("(Euro)|(Region of)", "the \\1\\2", knitr::combine_words(f2.4.4_txt_list_region$entity, oxford_comma=FALSE))`. 


### `r anch("Fig. 2.4.4")`<span class="red">Fig. 2.4.4</span> Estimated treatment coverage for MDR/RR-TB,^a^ 2015&#8211;`r report_year-1`, globally and WHO regions

```{r fig_2.4.4,  eval=show_estimates}
f2.4.4a_plot <- f2.4.4_global_data %>% 
  
  ggplot(aes(x=year, y=c_rr_coverage, ymin=0, ymax=100)) +
  
  geom_line(size=1) +
  
  geom_ribbon(aes(x=year, 
                  ymin=c_rr_coverage_lo , 
                  ymax=c_rr_coverage_hi),
              fill=c("darkblue"),
              alpha=0.4) +
  
  geom_line(aes(year, c_rr_coverage),
            size=1,
            colour=c("darkblue")) +


  scale_x_continuous(name="Year",
                     breaks = seq(2015, report_year-1, by=2)) +

  # display y-axis scale 
  scale_y_continuous(name = "Treatment coverage (%)") +

  theme_gtb()  +
  
  # Get rid of annoying x-axis line and ticks
  theme(axis.line.x = ggplot2::element_blank(),
        axis.ticks.x = element_blank())
  
f2.4.4b_plot <- f2.4.4_region_data %>% 
  
  ggplot(aes(x=year, y=c_rr_coverage, ymin=0, ymax=100)) +
  
  geom_line(size=1) +
  
  geom_ribbon(aes(x=year, 
                  ymin=c_rr_coverage_lo , 
                  ymax=c_rr_coverage_hi),
              fill=c("darkblue"),
              alpha=0.4) +
  
  geom_line(aes(year, c_rr_coverage),
            size=1,
            colour=c("darkblue")) +

  # geom_hline(yintercept = 90, size=1, col="grey30", 
  #            lty="dashed", alpha=.85 ) +

  # annotate("text", x = 2016.5, y = 94, label = "Target set at 2023 UNHLM",size=3, col="grey10") +

  facet_wrap( ~ entity, ncol = 3) +
  
  scale_x_continuous(name="Year",
                     breaks = seq(2015, report_year-1, by=2)) +

  # display y-axis scale 
  scale_y_continuous(name = "Treatment coverage (%)",
                     breaks = c(0,25,50,75,100)) +

  theme_gtb()  +
  
  # Get rid of annoying x-axis line and ticks
  theme(axis.line.x = ggplot2::element_blank(),
        axis.ticks.x = element_blank())
  
output_ggplot(f2.4.4a_plot, f2.4.4_global_data, show_static, pdf_csv_folder, save_csv, save_pdf)
output_ggplot(f2.4.4b_plot, f2.4.4_region_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```
<div id="fig_2_4_4_global"></div>

<div class="row">
<div class="col-md-4">
<div id="fig_2_4_4_afro"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_4_amro"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_4_searo"></div>
</div>
</div>

<div class="row">
<div class="col-md-4">
<div id="fig_2_4_4_euro"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_4_emro"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_4_wpro"></div>
</div>
</div>

<div class="footnote">^a^ The number of people started on treatment for MDR/RR-TB in a given year as a percentage of the estimated incidence of MDR/RR-TB in the same year.</div>


<hr />
<br />

Among the 30 high MDR/RR-TB burden countries, only `r int2word(nrow(f2.4.5_txt_list_hi))` had treatment coverage levels of &#8805;50% in `r report_year-1`: `r gsub("(Democ)|(Republic)|(Russian)", "the \\1\\2\\3", knitr::combine_words(f2.4.5_txt_list_hi$entity, oxford_comma=FALSE))`. Those with particularly low levels (<20%) included `r gsub("(Democ)", "the \\1\\2\\3",  knitr::combine_words(f2.4.5_txt_list_lo$entity, oxford_comma=FALSE))` (`r lnk("Fig. 2.4.5")`). 

### `r anch("Fig. 2.4.5")`<span class="red">Fig. 2.4.5</span> Estimated treatment coverage for MDR/RR-TB,^a^ 2015&#8211;`r report_year-1`, 30 high MDR/RR-TB burden countries

```{r fig_2.4.5, fig.asp=1.2, eval=show_estimates}

f2.4.5_plot <- f2.4.5_data %>% 
  
  ggplot(aes(x=year, y=c_rr_coverage, ymin=0, ymax=100)) +
  
  geom_line(size=1) +
    
  geom_ribbon(aes(x=year, 
                  ymin=c_rr_coverage_lo , 
                  ymax=c_rr_coverage_hi),
              fill=c("darkblue"),
              alpha=0.4) +
  
  geom_line(aes(year, c_rr_coverage),
            size=1,
            colour=c("darkblue")) +

  facet_wrap( ~ entity, ncol = 5) +
  
  # geom_hline(yintercept = 90, size=1, col="grey30", 
  #            lty="dashed", alpha=.85 ) +

  scale_x_continuous(name="Year",
                     breaks = seq(2010, report_year-1, by=2)) +

  # display y-axis scale 
  scale_y_continuous(name = "Treatment coverage (%)",
                     breaks = c(0,25,50,75,100,125,150,175,200)) +

  theme_gtb()  +
  
  # Get rid of annoying x-axis line and ticks
  theme(axis.line.x = ggplot2::element_blank(),
        axis.ticks.x = element_blank())
  
output_ggplot(f2.4.5_plot, f2.4.5_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```

<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_AGO"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_AZE"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_BGD"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_BLR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_CHN"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_PRK"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_COD"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_IND"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_IDN"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_KAZ"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_KGZ"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_MNG"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_MOZ"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_MMR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_NPL"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_NGA"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_PAK"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_PNG"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_PER"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_PHL"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_MDA"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_RUS"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_SOM"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_ZAF"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_TJK"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_UKR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_UZB"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_5_VNM"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_ZMB"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_5_ZWE"></div>
</div>
</div>


<div class="footnote">^a^ The number of people started on treatment for MDR/RR-TB in a given year as a percentage of the estimated incidence of MDR/RR-TB in the same year.</div>

<hr />
<br />

In `r report_year-1`, 10 countries accounted for `r ftb(f2.4.6_txt$pct_gap_top_ten)`% of the global gap between the estimated number of people who developed MDR/RR-TB and the number of people enrolled on treatment for MDR/RR-TB (`r lnk("Fig. 2.4.6")`). 

### `r anch("Fig. 2.4.6")`<span class="red">Fig. 2.4.6</span> The ten countries with the largest gaps between the number of people started on treatment for MDR/RR-TB and the best estimates of MDR/RR-TB incidence, `r report_year-1`

```{r fig_2.4.6,  eval=show_estimates}
# To help find centres of bubbles use
# filter(whomap:::centroid, id %in% f2.4.6_data$iso3) 
f2.4.6_plot <- f2.4.6_data %>%
  
  arrange(iso3) %>%
  
  bubblemap(legend.title = "Size of gap",
            legend.pos = c(0.14, 0.3),
            bubble.col = "green3",
            scale.breaks = c(5e3, 2.6e4, 5e4),
            scale.limits = c(3e3, 2e5),
            scale.labels = c("5 000","25 000","50 000"),
            water.col = "white") +
  
  annotate(geom='text', label='Myanmar', x=67, y=-10, hjust=0, size=3) +
  geom_segment(x=97, xend=90, y=21, yend=-8) +
  
  annotate(geom='text', label='Viet Nam', x=150, y=25, hjust=0, size=3) +
  geom_segment(x=106, xend=145, y=17, yend=25) +
  
  annotate(geom='text', label='Philippines', x=150, y=17, hjust=0, size=3) +
  geom_segment(x=121, xend=145, y=17, yend=17) +
  
  annotate(geom='text', label='China', x=150, y=38, hjust=0, size=3) +
  geom_segment(x=104, xend=145, y=37, yend=37) +
  
  annotate(geom='text', label='Pakistan', x=50, y=0, hjust=0, size=3) +
  geom_segment(x=70, xend=67, y=30, yend=1) +
  
  annotate(geom='text', label='India', x=68, y=-5, hjust=0, size=3) +
  geom_segment(x=80, xend=80, y=23, yend=-5) +
  
  annotate(geom='text', label='Indonesia', x=82, y=-15, hjust=0, size=3) +
  geom_segment(x=114, xend=105, y=0, yend=-12) +
  
  annotate(geom='text', label='Nigeria', x=-25, y=0, hjust=0, size=3) +
  geom_segment(x=8, xend=-5, y=10, yend=0) +

  # annotate(geom='text', label='Democratic\nRepublic\nof the Congo', x=-30, y=-20, hjust=0, size=3) +
  # geom_segment(x=24, xend=0, y=-2, yend=-20) +

  # annotate(geom='text', label="Democratic People's Republic of Korea", x=105, y=81, hjust=0, size=3) +
  # geom_segment(x=127, xend=127, y=40, yend=78) +
  
  annotate(geom='text', label='Ukraine', x=35, y=80, hjust=0, size=3) +
  geom_segment(x=31, xend=36, y=48, yend=77) +
  
  annotate(geom='text', label='South Africa', x=50, y=-30, hjust=0, size=3) +
  geom_segment(x=25, xend=45, y=-29, yend=-29)

  # annotate(geom='text', label='Russian Federation', x=35, y=80, hjust=0, size=3) +
  # geom_segment(x=99, xend=70, y=62, yend=78) +


output_ggplot(f2.4.6_plot, f2.4.6_data, show_static = T, pdf_csv_folder, save_csv, save_pdf)


```
<div class="footnote">^a^ The ten countries ranked in order of the size of the gap between the number of people enrolled on treatment for MDR/RR-TB and the best estimates of the incidence of MDR/RR-TB in `r report_year-1` are `r if(show_estimates){gsub("Viet Nam", "Viet&nbsp;Nam", gsub("(Democrat)|(Philip)", "the \\1\\2", knitr::combine_words(f2.4.6_data$country, oxford_comma=FALSE)))}`.</div>

<hr />
<br />

Globally, the treatment success rate for people enrolled on treatment for MDR/RR-TB in `r report_year-3` (the latest year for which outcome data are available) was `r ftb(f2.4.7_txt$c_tsr_2021)`%; this was a further improvement from `r ftb(f2.4.7_txt$c_tsr_2020)`% in `r report_year-4`, `r ftb(f2.4.7_txt$c_tsr_2019)`% in `r report_year-5` and much better than the level of `r ftb(f2.4.7_txt$c_tsr_2012)`% in 2012 (`r lnk("Fig. 2.4.7")`).

### `r anch("Fig. 2.4.7")`<span class="red">Fig. 2.4.7</span> Treatment outcomes for people diagnosed with MDR/RR-TB globally, 2012&#8211;`r report_year-3` 

```{r fig_2.4.7, fig.alt="Horizontal bar charts showing TB treatment outcomes globally by year since 2012 for MDR/RR-TB"}

f2.4.7_plot <- f2.4.7_data %>%
  
  ggplot(aes(year,
             value,
             fill = factor(outcome,
                           levels = c("Treatment success",
                                      "Failure",
                                      "Died",
                                      "Lost to follow-up",
                                      "Not evaluated")))) +
 
  geom_col(position = position_stack(reverse = TRUE)) +

  coord_flip() +

  theme_gtb() +

  scale_fill_manual("", 
                    values = c("Treatment success" = palette_gtb("succ"),
                               "Failure" = palette_gtb("fail"),
                               "Died" = palette_gtb("died"),
                               "Lost to follow-up" = palette_gtb("ltfu"),
                               "Not evaluated" = palette_gtb("neval"))) +

  labs(x="Year started on treatment", y="Percentage of cohort") +

  scale_x_continuous(breaks = seq(2012, report_year-3)) +

  geom_text(data=subset(f2.4.7_data,
                        outcome=="Treatment success"),
            aes(label = round(value, digits = 0)),
			            position = position_stack(reverse = TRUE),
            size=3,
            hjust=1.5,
            color="white")

output_ggplot(f2.4.7_plot, f2.4.7_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```
<div id="fig_2_4_7"></div>

```{r fig_2.4.7b, fig.alt="Horizontal bar charts showing TB treatment outcomes globally by year since 2012 for MDR/RR-TB",fig.height=21,eval=FALSE}

f2.4.7b_plot <- f2.4.7b_data %>%

  ggplot(aes(year,
             value,
             fill = factor(outcome,
                           levels = c("Treatment success",
                                      "Failure",
                                      "Died",
                                      "Lost to follow-up",
                                      "Not evaluated")))) +
 
  geom_col(position = position_stack(reverse = TRUE)) +

  coord_flip() +
  
  facet_wrap(~ country, ncol = 3, scales="free_y") +

  theme_gtb() +

  scale_fill_manual("", 
                    values = c("Treatment success" = palette_gtb("succ"),
                               "Failure" = palette_gtb("fail"),
                               "Died" = palette_gtb("died"),
                               "Lost to follow-up" = palette_gtb("ltfu"),
                               "Not evaluated" = palette_gtb("neval"))) +

  labs(x="Year started on treatment", y="Percentage of cohort") +

  scale_x_continuous(breaks = seq(2012, report_year-3)) 

output_ggplot(f2.4.7b_plot, f2.4.7b_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```


<hr />
<br />

Among WHO regions, the treatment success rate in `r report_year-3` was lowest in the `r f2.4.8_txt2$lo_region` and highest in the `r f2.4.8_txt2$hi_region` (`r lnk("Fig. 2.4.8")`).

### `r anch("Fig. 2.4.8")`<span class="red">Fig. 2.4.8</span> Treatment outcomes for people diagnosed with MDR/RR-TB who were started on treatment in `r report_year-3`, WHO regions and globally  

```{r fig_2.4.8, fig.alt="Horizontal bar chart showing TB treatment outcomes in MDR/RR-TB cases for WHO regions and globally"}

f2.4.8_plot <- f2.4.8_data %>%

  ggplot(aes(x=entity, 
             y=value, 
             fill = factor(outcome,
                           levels = c("Treatment success",
                                      "Failure",
                                      "Died",
                                      "Lost to follow-up",
                                      "Not evaluated")))) +
 
  geom_col(position = position_stack(reverse = TRUE)) +
  coord_flip() +

  theme_gtb() +
  
  scale_fill_manual("", 
                    values = c("Treatment success" = palette_gtb("succ"),
                               "Failure" = palette_gtb("fail"),
                               "Died" = palette_gtb("died"),
                               "Lost to follow-up" = palette_gtb("ltfu"),
                               "Not evaluated" = palette_gtb("neval"))) +
  
  labs(x="", y="Percentage of cohort") +

  geom_text(data=subset(f2.4.8_data, 
                        outcome=="Treatment success"),
            aes(label = round(value, digits = 0)),
            position = position_stack(reverse = TRUE), 
            size=3,
            hjust=1.5,
            color="white")


output_ggplot(f2.4.8_plot, f2.4.8_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```
<div id="fig_2_4_8"></div>


<hr />
<br />

Following its approval by WHO in 2022, the short 6-month all-oral regimen known as BPaLM/BPaL is being used in a growing number of countries: `r f2.4.9_txt2$bpalm_used_2023` countries by the end of `r report_year - 1`, up from `r f2.4.9_txt2$bpalm_used_2022` at the end of `r report_year - 2` (`r lnk("Fig. 2.4.9")`). Globally in `r report_year - 1`, `r int_spacer(f2.4.9_txt$bpalm_tx_2023)` people with MDR/RR-TB were reported to have been started treatment on the BPaLM/BPaL regimen, up from `r int_spacer(f2.4.9_txt$bpalm_tx_2022)` in 2022.

### `r anch("Fig. 2.4.9")`<span class="red">Fig. 2.4.9</span> Countries that had used the all-oral 6-month (BPaLM/BPaL) MDR/RR-TB treatment regimen by the end of `r report_year-1`

```{r fig_2.4.9, fig.alt="World map showing which countries used all-oral 6-month (BPaLM/BPaL 6-9 months) MDR-TB treatment regimens"}

f2.4.9_plot <- f2.4.9_data %>% 

  whomap(colours=c("blueviolet","#EFF3FF"),
         legend.title = "",
         na.col = "white",
         water.col = "white")


output_ggplot(f2.4.9_plot, f2.4.9_data, show_static = T, pdf_csv_folder, save_csv, save_pdf)

```

<hr />
<br />

By the end of `r report_year-1`, `r ftb(f2.4.10_txt$oral_short_used_2023)` countries were using the shorter 9-month regimens for the treatment of MDR/RR-TB (`r lnk("Fig. 2.4.10")`). This was a small increase from `r ftb(f2.4.10_txt$oral_short_used_2022)` in `r report_year-2` and `r ftb(f2.4.10_txt$oral_short_used_2021)` in `r report_year-3`. 

### `r anch("Fig. 2.4.10")`<span class="red">Fig. 2.4.10</span> Countries that had used the all-oral 9-month MDR/RR-TB treatment regimens by the end of `r report_year-1`

```{r fig_2.4.10, fig.alt="World map showing which countries used all-oral shorter MDR-TB treatment regimens"}

f2.4.10_plot <- f2.4.10_data %>% 

  whomap(colours=c("#4975a8", "#d6f5f5"),
         legend.title = "",
         na.col = "white",
         water.col = "white")


output_ggplot(f2.4.10_plot, f2.4.10_data, show_static = T, pdf_csv_folder, save_csv, save_pdf)

```

<hr />
<br />

Globally in `r report_year-1`, longer regimens (18&#8211;20 months) were still the most commonly used of three major categories of regimen for treatment of MDR/RR-TB; `r ftb(f2.4.11_txt$mdrxdr_alloral_tx)`% of people with MDR/RR-TB were enrolled on treatment with longer regimens, followed by the all-oral 9-month (`r ftb(f2.4.11_txt$mdr_alloral_short_tx)`%) and all-oral 6-month (`r ftb(f2.4.11_txt$mdrxdr_bpalm_tx)`%) regimens (`r lnk("Fig. 2.4.11")`).

At regional level, the percentage of people with MDR/RR-TB for whom the all-oral 6-month regimen (BPaLM/BPaL) was used was highest in the `r f2.4.11_6month_txt %>% slice(1) %>% select(entity)` (`r ftb(f2.4.11_6month_txt %>% slice(1) %>% select(pcnt))`%) and the `r f2.4.11_6month_txt %>% slice(2) %>% select(entity)` (`r ftb(f2.4.11_6month_txt %>% slice(2) %>% select(pcnt))`%). All-oral 9-month regimens were predominantly used in the African Region (`r ftb(f2.4.11_9month_txt$pcnt)`%).


### `r anch("Fig. 2.4.11")`<span class="red">Fig. 2.4.11</span> Percentage of people with MDR/RR-TB treated with all-oral 6-month (BPaLM/BPaL), all-oral 9-month or longer (18&#8211;20 months) regimens, 2019&#8211;`r report_year-1`

```{r fig_2.4.11, fig.alt="World map showing proportion of drug-resistant TB patients followed up for adverse events"}

f2.4.11_plot <- f2.4.11_data %>% 
  
  mutate(regimen = factor(regimen, levels = c("mdrxdr_bpalm_tx","mdr_alloral_short_tx", "mdrxdr_alloral_tx","mdr_unk_tx"),
                          labels = c("All-oral 6-month (BPaLM/BPaL) regimen", "All-oral 9-month regimens", "Longer regimens (18\u201320 months)","Regimens unknown"))) %>%
  ggplot(aes(x=year, y=pcnt, ymin=0, colour=regimen)) +
  geom_line(size = 1.3) +
  geom_point(aes(col=regimen), size = 1.5)+
  geom_point(col="white", size = 0.7)+
  
  facet_wrap(~ entity, ncol = 4) +

  scale_x_continuous(name="Year",
                     breaks = seq (2019, report_year-1, by = 1)) +
  scale_y_continuous(name = "Proportion of people with MDR/RR-TB\nstarted on treatment with each regimens (%)") +
  scale_color_manual(values=c("blueviolet","dodgerblue3","#880e0e","grey40")) +
  
  theme_gtb() +
  
  # Get rid of annoying x-axis line and ticks
  theme(axis.line.x = ggplot2::element_blank(),
        axis.ticks.x = element_blank())

output_ggplot(f2.4.11_plot, f2.4.11_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```
<div id="fig_2_4_11_global"></div>

<div class="row">
<div class="col-md-4">
<div id="fig_2_4_11_AFR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_11_AMR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_11_SEA"></div>
</div>
</div>

<div class="row">
<div class="col-md-4">
<div id="fig_2_4_11_EUR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_11_EMR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_11_WPR"></div>
</div>
</div>

<hr />
<br />

Trends in the percentage of people with MDR/RR-TB who were treated with the three major categories of MDR/RR-TB regimens vary considerably among the 30 high MDR/RR-TB burden countries (`r lnk("Fig. 2.4.12")`). In `r report_year-1`, `r int2word(f2.4.12_6month_txt %>% nrow())` countries used the all-oral 6-months regimen for at least 10% of people with MDR/RR-TB: `r knitr::combine_words(f2.4.12_6month_txt$country, oxford_comma=FALSE)`. More than half of those with MDR/RR-TB were treated with all-oral 9-month regimens in `r int2word(f2.4.12_9month_txt %>% nrow())` countries: `r {gsub("Viet Nam", "Viet&nbsp;Nam", gsub("(Democrat)|(Philip)", "the \\1\\2", knitr::combine_words(f2.4.12_9month_txt$country, oxford_comma=FALSE)))}`. 

### `r anch("Fig. 2.4.12")`<span class="red">Fig. 2.4.12</span> Percentage of people with MDR/RR-TB treated with all-oral 6-month (BPaLM/BPaL), all-oral 9-month regimens or longer (18&#8211;20 months) regimens, 30 high MDR/RR-TB burden countries, 2019&#8211;`r report_year-1`

```{r fig_2.4.12, fig.asp=1.3,  fig.alt="use of MDR/RR-TB regimens by 30 high DR burden countries"}

f2.4.12_plot <- f2.4.12_data %>% 
  
  mutate(regimen = factor(regimen, levels = c("mdrxdr_bpalm_tx","mdr_alloral_short_tx", "mdrxdr_alloral_tx","mdr_unk_tx"),
                          labels = c("All-oral 6-month (BPaLM/BPaL) regimen", "All-oral 9-month regimens", "Longer regimens (18\u201320 months)","Regimens unknown"))) %>%
  ggplot(aes(x=year, y=pcnt, ymin=0, colour=regimen)) +
  geom_line(size = 1.3) +
  geom_point(aes(col=regimen), size = 1.5)+
  geom_point(col="white", size = 0.7)+
 
  facet_wrap(~ country, ncol = 4) +
  
  scale_x_continuous(name="Year",
                     breaks = seq (2019, report_year-1, by = 1)) +
  scale_y_continuous(name = "Proportion of people with MDR/RR-TB\nstarted on treatment with each regimens (%)") +
  scale_color_manual(values=c("blueviolet","dodgerblue3","#880e0e","grey40")) +
  
  theme_gtb() +
  
  # Get rid of annoying x-axis line and ticks
  theme(axis.line.x = ggplot2::element_blank(),
        axis.ticks.x = element_blank())


output_ggplot(f2.4.12_plot, f2.4.12_data, show_static, pdf_csv_folder, save_csv, save_pdf)

```
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_AGO"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_AZE"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_BGD"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_BLR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_CHN"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_PRK"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_COD"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_IND"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_IDN"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_KAZ"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_KGZ"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_MNG"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_MOZ"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_MMR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_NPL"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_NGA"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_PAK"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_PNG"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_PER"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_PHL"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_MDA"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_RUS"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_SOM"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_ZAF"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_TJK"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_UKR"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_UZB"></div>
</div>
</div>
<div class="row">
<div class="col-md-4">
<div id="fig_2_4_12_VNM"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_ZMB"></div>
</div>
<div class="col-md-4">
<div id="fig_2_4_12_ZWE"></div>
</div>
</div>


<hr />
<br />


In `r report_year-1`, in most countries, at least some people diagnosed with drug-resistant TB were being actively and systematically monitored for adverse events (`r lnk("Fig. 2.4.13")`).

### `r anch("Fig. 2.4.13")`<span class="red">Fig. 2.4.13</span> Percentage of people enrolled on treatment for drug-resistant TB who were actively and systematically monitored for adverse events, `r report_year-1`

```{r fig_2.4.13, fig.alt="World map showing proportion of drug-resistant TB patients followed up for adverse events"}

f2.4.13_plot <- f2.4.13_data %>% 

  whomap(colours=brewer.pal(4, "Reds"),
         legend.title = "Percentage (%)",
         na.col = "white",
         water.col = "white")

output_ggplot(f2.4.13_plot, f2.4.13_data, show_static = T, pdf_csv_folder, save_csv, save_pdf)

```

<hr />
<br />

Further country-specific details about treatment for drug-resistant TB are available in the [Global tuberculosis report app](https://www.who.int/teams/global-tuberculosis-programme/data#app) and [country profiles](https://worldhealthorg.shinyapps.io/tb_profiles/).

Data shown on this webpage are as of `r format(as.Date(snapshot_date), format="%d %B %Y")` (see <span class="red">Annex 2</span> of the core report document for more details).


`r anch("refs")`

<hr style="border:1px solid gray20">

**References**

1. Rapid communication: key changes to treatment of multidrug- and rifampicin-resistant tuberculosis (MDR/RR-TB). Geneva: World Health Organization; 2018 (https://iris.who.int/handle/10665/275383).

2. Global Drug Facility (GDF). Geneva: Stop TB Partnership; 2024 (https://www.stoptb.org/buyers/plan-order).

3. WHO consolidated guidelines on tuberculosis, Module 4: Treatment &#8211; drug-resistant tuberculosis treatment, 2022 update. Geneva: World Health Organization; 2022 (https://iris.who.int/handle/10665/365308).

4. Key updates to the treatment of drug-resistant tuberculosis: rapid communication, August 2024. Geneva: World Health Organization; 2024 (https://iris.who.int/handle/10665/378472).


```{r js_functions}
# Insert javascript file containing common Kendo number formatting functions ----
cat(writeLines(readLines(here("report/resources/gtbr_js.htm"))))
```

<script type="text/javascript">
/* JSON data objects for the figures */

var fig_2_4_1_data = `r f2.4.1_data %>% pivot_wider(names_from = age_group, values_from = how_many) %>% rename(age_014=3, age_15plus=4) %>% toJSON("rows")`   ;  

var fig_2_4_1b_data = `r f2.4.1b_data %>% toJSON("rows")`   ;  

var fig_2_4_2_data = `r f2.4.2_data %>% select(country, year, rr_detected, rr_treated) %>% toJSON("rows")`   ;  

var fig_2_4_3_data = `r f2.4.3_data %>% toJSON("rows")`   ;  

var fig_2_4_4_global = `r f2.4.4_global_data %>% rename(value = c_rr_coverage , lo = c_rr_coverage_lo, hi = c_rr_coverage_hi) %>% toJSON("rows")`   ;  
var fig_2_4_4_regional = `r f2.4.4_region_data %>% rename(value = c_rr_coverage , lo = c_rr_coverage_lo, hi = c_rr_coverage_hi) %>% toJSON("rows")`   ;  
var fig_2_4_5_data = `r f2.4.5_data %>% rename(value = c_rr_coverage , lo = c_rr_coverage_lo, hi = c_rr_coverage_hi) %>% toJSON("rows")`   ;  

var fig_2_4_7_data = `r f2.4.7_data %>% pivot_wider(names_from = outcome, values_from = value) %>% arrange(rev(year)) %>% rename(entity = 1, succ=3, fail=4, died=5, ltfu=6, neval=7) %>% toJSON("rows")`   ;  

var fig_2_4_8_data = `r f2.4.8_data %>% pivot_wider(names_from = outcome, values_from = value) %>% rename(succ=2, fail=3, died=4, ltfu=5, neval=6) %>% toJSON("rows")`   ;  

var fig_2_4_11_data = `r f2.4.11_data %>% pivot_wider(names_from = regimen, values_from = pcnt) %>% toJSON("rows")`   ;  

var fig_2_4_12_data = `r f2.4.12_data %>% pivot_wider(names_from = regimen, values_from = pcnt) %>% toJSON("rows")`   ;  

</script>



```{js, echo=FALSE}

/* Functions to create the figures */

function createFig_2_4_1b(fig_ID, data, filter, color, year_step, max) {
  
  	// Filter the dataset on the country variable
		dataJSON = data.filter( element => element.age_group == filter);
  
		$(fig_ID).kendoChart({
			dataSource: dataJSON,
			chartArea: {
				height: 500
			},	
      title: {
				text: filter,
				color: "black",
				font: "bold 14px  Arial,Helvetica,sans-serif",
        align: "center"
			},	
			legend: {
				position: "bottom"
			},
			seriesDefaults: {
				type: "line"
			},
			series: [{
				field: "how_many",
				color: color,
        tooltip: {
				visible: true,
				template: "#= category #: #= num_spacer(value) #"
			}
			}],
			valueAxis: {
				labels: {
				template: "#= axis_spacer(value) #",
				},
				title: {
					text: "Number per year"
				},
				line: {
					visible: false
				},	
				min: 0,
				max: max
			},
			categoryAxis: {
				field: "year",
				labels: {
					rotation: 0,
          step: year_step
				},
				majorGridLines: {
					visible: false
				},
				title: {
					text: "Year"
				}
			}

		});
}


function createFig_2_4_2(fig_ID, data, filter) {
  
  		// Filter the dataset on the country variable
		dataJSON = data.filter( element => element.country == filter);
  
		$(fig_ID).kendoChart({
			dataSource: dataJSON,
			chartArea: {
				height: 250
			},	
      title: {
				text: filter,
				color: "black",
				font: "bold 14px  Arial,Helvetica,sans-serif"
			},	
			legend: {
				position: "bottom"
			},
      series: [{
				type: "line",
				field: "rr_detected",
				color: "#277abe",
        markers: {
          size: 3
        },
				tooltip: {
					visible: true,
					format: "{0}",
					template: "Diagnosed with MDR/RR-TB (#= category #): #= kendo.toString(value, 'n0').replace(/,/g, ' ') #"
				}
			},{
				type: "line",
				field: "rr_treated",
				color: "red",  
        markers: {
          size: 3
        },
				tooltip: {
					visible: true,
					format: "{0}",
					template: "Enrolled on MDR/RR-TB treatment (#= category #): #= kendo.toString(value, 'n0').replace(/,/g, ' ') #"
				}
			}],
			valueAxis: {
				labels: {
					template: "#= kendo.toString(value, 'n0').replace(/,/g, ' ') #"
				},
				title: {
					text: "Number per year"
				},
				line: {
					visible: false
				}
			},
			categoryAxis: {
				field: "year",
				labels: {
					rotation: 0,
          step: 2
				},
				majorGridLines: {
					visible: false
				},
				title: {
					text: "Year"
				}
			}

		});
}

function tb_format_thou_amro(n) { 
  nt = n/1000; 
  if (nt < 100) {
    ntform = Number(nt.toPrecision(2))*1000;
      } else {
    ntform = Number(nt.toPrecision(3))*1000;
  } 
  return num_spacer(ntform)
}


function createFig_2_4_3(fig_ID, data, filter, height) {
   	
  // Filter the dataset on the country variable
		dataJSON = data.filter( element => element.entity == filter);
   
		$(fig_ID).kendoChart({
			dataSource: dataJSON,
			chartArea: {
				height: height
			},
      title: {
				text: filter,
				color: "black",
				font: "bold 14px  Arial,Helvetica,sans-serif",
        align: "center"
			},	
			legend: {
				position: "bottom"
			},
      series: [{
				type: "line",
				field: "e_inc_rr_num",
				color: "#91A93E",
        markers: {
          size: 3
        },
				tooltip: {
					visible: true,
					format: "{0}",
					template: "Estimates of the number of incident cases of MDR/RR-TB (#= category #): #= tb_format_thou(value) # 000"
				}
			},{
				type: "rangeArea",
				fromField: "e_inc_rr_num_lo",
				toField: "e_inc_rr_num_hi",
				color: "#91A93E",
				tooltip: {
					visible: true,
				format: "{0}",
				template: "95% uncertainty interval (#= category #): #= tb_format_thou_amro(value.from) #\u2013#= tb_format_thou(value.to) # 000"
				}
			},{
				type: "line",
				field: "rr_detected",
				color: "#277abe",		
        markers: {
          size: 3
        },
				tooltip: {
					visible: true,
					format: "{0}",
					template: "Number of people diagnosed with MDR/RR-TB (#= category #): #= kendo.toString(value, 'n0').replace(/,/g, ' ') #"
				}
			},{
				type: "line",
				field: "rr_treated",
				color: "Red",		
        markers: {
          size: 3
        },
				tooltip: {
					visible: true,
					format: "{0}",
					template: "Number enrolled on MDR-TB treatment (#= category #): #= kendo.toString(value, 'n0').replace(/,/g, ' ') #"
				}
			},],
			valueAxis: {
				labels: {
          template: "#= kendo.toString(value, 'n0').replace(/,/g, ' ') #"
				},
				title: {
					text: "Number per year"
				},
				line: {
					visible: false
				}
			},
			categoryAxis: {
				field: "year",
				labels: {
					rotation: 0,
          step: 2
				},
				majorGridLines: {
					visible: false
				},
				title: {
					text: "Year"
				}
			}

		});
}


function createFig_2_4_4(fig_ID, data, filter, height) {
   
  		// Filter the dataset on the country variable
		dataJSON = data.filter( element => element.entity == filter);
  
		$(fig_ID).kendoChart({
			dataSource: dataJSON,
			chartArea: {
				height: height
			},	
      title: {
				text: filter,
				color: "black",
				font: "bold 14px  Arial,Helvetica,sans-serif"
			},	
			legend: {
				position: "bottom"
			},
      series: [{
				type: "line",
				field: "value",
				color: "darkblue",	
				markers: {
          size: 3
        },
				tooltip: {
					visible: true,
					template: "Treatment coverage (#= category #): #= value.toPrecision(2) #%"
				}
			},{
				type: "rangeArea",
				fromField: "lo",
				toField: "hi",
				color: "darkblue",
				tooltip: {
					visible: true,
				template: "95% uncertainty interval of treatment coverage (#= category #): #= tb_format_pct(value.from) #\u2013#= tb_format_pct(value.to) #%"
				}
			}],
			valueAxis: {
				title: {
					text: "Treatment coverage (%)"
				},
				line: {
					visible: false
				},
				min: 0,
				max: 110
			},
			categoryAxis: {
				field: "year",
				labels: {
          step: 2
				},
				majorGridLines: {
					visible: false
				},
				title: {
					text: "Year"
				}
			}

		});

}


function createFig_2_4_5(fig_ID, data, filter, height) {
   
  		// Filter the dataset on the country variable
		dataJSON = data.filter( element => element.entity == filter);
  
		$(fig_ID).kendoChart({
			dataSource: dataJSON,
			chartArea: {
				height: height
			},	
      title: {
				text: filter,
				color: "black",
				font: "bold 14px  Arial,Helvetica,sans-serif"
			},	
			legend: {
				position: "bottom"
			},
      series: [{
				type: "line",
				field: "value",
				color: "darkblue",	
				markers: {
          size: 3
        },
				tooltip: {
					visible: true,
					template: "Treatment coverage (#= category #): #= tb_format_pct(value) #%"
				}
			},{
				type: "rangeArea",
				fromField: "lo",
				toField: "hi",
				color: "darkblue",
				tooltip: {
					visible: true,
				template: "95% uncertainty interval of treatment coverage (#= category #): #= tb_format_pct(value.from) #\u2013#= tb_format_pct(value.to) #%"
				}
			}],
			valueAxis: {
				title: {
					text: "Treatment coverage (%)"
				},
				line: {
					visible: false
				},
				min: 0,
				max: 240
			},
			categoryAxis: {
				field: "year",
				labels: {
          step: 2
				},
				majorGridLines: {
					visible: false
				},
				title: {
					text: "Year"
				}
			}

		});

}


function createFig_2_4_7(fig_ID, data, y_axis_title_text) {
		$(fig_ID).kendoChart({
			dataSource: data,
			chartArea: {
				height: 500
			},	
			legend: {
				position: "bottom"
			},
			seriesDefaults: {
				type: "bar",
        stack: true,
        gap: 0.2
			},
			series: [{
        name: "Treatment success",
				field: "succ",
				color: "#009E73",
        tooltip: {
				visible: true,
				template: "Treatment success (#= category #): #= value.toPrecision(2) #%"
			}
			},{
        name: "Failure",
				field: "fail",
				color: "#ED1D24",
        tooltip: {
				visible: true,
				template: "Failure (#= category #): #= value.toPrecision(2) #%"
			}
			},{
        name: "Died",
				field: "died",
				color: "#F7941E",
        tooltip: {
				visible: true,
				template: "Died (#= category #): #= value.toPrecision(2) #%"
			}
			},{
        name: "Lost to follow-up",
				field: "ltfu",
				color: "#E5DDB3",
        tooltip: {
				visible: true,
				template: "Lost to follow-up (#= category #): #= value.toPrecision(2) #%"
			}
			},{
        name: "Not evaluated",
				field: "neval",
				color: "#D1D3D4",
        tooltip: {
				visible: true,
				template: "Not evaluated (#= category #): #= value.toPrecision(2) #%"
			}
			},
              ],
			valueAxis: {

				title: {
					text: "Percentage of cohort"
				},
				line: {
					visible: false
				},
				min: 0,
        max: 100
			},
			categoryAxis: {
				field: "entity",
				title: {
					text: y_axis_title_text
				},
				labels: {
					rotation: "auto"
				},
				majorGridLines: {
					visible: false
				}			}
		});
}

function createFig_2_4_11(fig_ID, data, height, filter) {
  
  		// Filter the dataset on the country variable
		dataJSON = data.filter( element => element.entity == filter);
  
		$(fig_ID).kendoChart({
			dataSource: dataJSON,
			chartArea: {
				height: height
			},	
      title: {
				text: filter,
				color: "black",
				font: "bold 14px  Arial,Helvetica,sans-serif",
        align: "center"
			},	
			legend: {
				position: "bottom"
			},
			seriesDefaults: {
				type: "line"
			},
			series: [{
        name: "All-oral 6-month (BPaLM/BPaL) regimen",
				field: "mdrxdr_bpalm_tx",
				color: "blueviolet",
				markers: {
          size: 3
        },
        tooltip: {
				visible: true,
				template: "All-oral 6-month (BPaLM/BPaL) regimen (#= category #): #= num_spacer(Number(value.toPrecision(2))) #%"
			}
			},{
        name: "All-oral 9-month regimens",
				field: "mdr_alloral_short_tx",
				color: "#4975a8",
				markers: {
          size: 3
        },
        tooltip: {
				visible: true,
				template: "All-oral 9-month regimens (#= category #): #= num_spacer(Number(value.toPrecision(2))) #%"
			}
			},{
        name: "Longer regimens (18\u201320 months)",
				field: "mdrxdr_alloral_tx",
				color: "#880e0e",
				markers: {
          size: 3
        },
        tooltip: {
				visible: true,
				template: "Longer regimens (18\u201320 months) (#= category #): #= num_spacer(Number(value.toPrecision(2))) #%"
			}
			},{
        name: "Regimens unknown",
				field: "mdr_unk_tx",
				color: "grey",        
				dashType: "dash",

				markers: {
          size: 3
        },
        tooltip: {
				visible: true,
				template: "Regimens unknown (#= category #): #= num_spacer(Number(value.toPrecision(2))) #%"
			}
			},
              ],

			valueAxis: {
				labels: {
					format: "{0}"
				},
				title: {
					text: "Percentage",
          font: "14px Arial,Helvetica,sans-serif"
				},
				line: {
					visible: false
				},
				max: 100,
        min: 0
			},
			categoryAxis: {
				field: "year",
        labels: {
					rotation: 0,
          step: 1
          },
				majorGridLines: {
					visible: false
				},
				title: {
					text: "Year"
				}
			}

		});
}


function createFig_2_4_12(fig_ID, data, height, filter) {
  
  		// Filter the dataset on the country variable
		dataJSON = data.filter( element => element.country == filter);
  
		$(fig_ID).kendoChart({
			dataSource: dataJSON,
			chartArea: {
				height: height
			},	
      title: {
				text: filter,
				color: "black",
				font: "bold 14px  Arial,Helvetica,sans-serif",
        align: "center"
			},	
			legend: {
				position: "bottom"
			},
			seriesDefaults: {
				type: "line"
			},
			series: [{
        name: "All-oral 6-month (BPaLM/BPaL) regimen",
				field: "mdrxdr_bpalm_tx",
				color: "blueviolet",
				markers: {
          size: 3
        },
        tooltip: {
				visible: true,
				template: "All-oral 6-month (BPaLM/BPaL) regimen (#= category #): #= num_spacer(Number(value.toPrecision(2))) #%"
			}
			},{
        name: "All-oral 9-month regimens",
				field: "mdr_alloral_short_tx",
				color: "#4975a8",
				markers: {
          size: 3
        },
        tooltip: {
				visible: true,
				template: "All-oral 9-month regimens (#= category #): #= num_spacer(Number(value.toPrecision(2))) #%"
			}
			},{
        name: "Longer regimens (18\u201320 months)",
				field: "mdrxdr_alloral_tx",
				color: "#880e0e",
				markers: {
          size: 3
        },
        tooltip: {
				visible: true,
				template: "Longer regimens (18\u201320 months) (#= category #): #= num_spacer(Number(value.toPrecision(2))) #%"
			}
			},{
        name: "Regimens unknown",
				field: "mdr_unk_tx",
				color: "grey",
				dashType: "dash",

				markers: {
          size: 3
        },
        tooltip: {
				visible: true,
				template: "Regimens unknown (#= category #): #= num_spacer(Number(value.toPrecision(2))) #%"
			}
			},
              ],

			valueAxis: {
				labels: {
					format: "{0}"
				},
				title: {
					text: "Percentage",
          font: "14px Arial,Helvetica,sans-serif"
				},
				line: {
					visible: false
				},
				max: 102,
        min: 0
			},
			categoryAxis: {
				field: "year",
        labels: {
					rotation: 0,
          step: 1
          },
				majorGridLines: {
					visible: false
				},
				title: {
					text: "Year"
				}
			}

		});
}


```

```{js, echo=FALSE}

/* Create the figures after the document has been loaded */

$(document).ready(function() {
  <!-- createFig_2_4_1(); -->
                 createFig_2_4_1b("#fig_2_4_1_all",fig_2_4_1b_data,"All ages","#A5D727",2, 200000);   
                 createFig_2_4_1b("#fig_2_4_1_adult",fig_2_4_1b_data,"People aged \u226515 years or age not reported","#009E73",1, 200000);   
                 createFig_2_4_1b("#fig_2_4_1_children",fig_2_4_1b_data,"People aged 0\u201314 years","red",1, 6000);   

    createFig_2_4_2("#fig_2_4_2_AGO",fig_2_4_2_data,"Angola");
                 createFig_2_4_2("#fig_2_4_2_PRK",fig_2_4_2_data,"Democratic People's Republic of Korea");
                 createFig_2_4_2("#fig_2_4_2_KGZ",fig_2_4_2_data,"Kyrgyzstan");
                 createFig_2_4_2("#fig_2_4_2_NGA",fig_2_4_2_data,"Nigeria");
                 createFig_2_4_2("#fig_2_4_2_MDA",fig_2_4_2_data,"Republic of Moldova");
                 createFig_2_4_2("#fig_2_4_2_UKR",fig_2_4_2_data,"Ukraine");
                 createFig_2_4_2("#fig_2_4_2_AZE",fig_2_4_2_data,"Azerbaijan");
                 createFig_2_4_2("#fig_2_4_2_COD",fig_2_4_2_data,"Democratic Republic of the Congo");
                 createFig_2_4_2("#fig_2_4_2_MNG",fig_2_4_2_data,"Mongolia");
                 createFig_2_4_2("#fig_2_4_2_PAK",fig_2_4_2_data,"Pakistan");
                 createFig_2_4_2("#fig_2_4_2_RUS",fig_2_4_2_data,"Russian Federation");
                 createFig_2_4_2("#fig_2_4_2_UZB",fig_2_4_2_data,"Uzbekistan");
                 createFig_2_4_2("#fig_2_4_2_BGD",fig_2_4_2_data,"Bangladesh");
                 createFig_2_4_2("#fig_2_4_2_IND",fig_2_4_2_data,"India");
                 createFig_2_4_2("#fig_2_4_2_MOZ",fig_2_4_2_data,"Mozambique");
                 createFig_2_4_2("#fig_2_4_2_PNG",fig_2_4_2_data,"Papua New Guinea");
                 createFig_2_4_2("#fig_2_4_2_SOM",fig_2_4_2_data,"Somalia");
                 createFig_2_4_2("#fig_2_4_2_VNM",fig_2_4_2_data,"Viet Nam");
                 createFig_2_4_2("#fig_2_4_2_BLR",fig_2_4_2_data,"Belarus");
                 createFig_2_4_2("#fig_2_4_2_IDN",fig_2_4_2_data,"Indonesia");
                 createFig_2_4_2("#fig_2_4_2_MMR",fig_2_4_2_data,"Myanmar");
                 createFig_2_4_2("#fig_2_4_2_PER",fig_2_4_2_data,"Peru");
                 createFig_2_4_2("#fig_2_4_2_ZAF",fig_2_4_2_data,"South Africa");
                 createFig_2_4_2("#fig_2_4_2_ZMB",fig_2_4_2_data,"Zambia");
                 createFig_2_4_2("#fig_2_4_2_CHN",fig_2_4_2_data,"China");
                 createFig_2_4_2("#fig_2_4_2_KAZ",fig_2_4_2_data,"Kazakhstan");
                 createFig_2_4_2("#fig_2_4_2_NPL",fig_2_4_2_data,"Nepal");
                 createFig_2_4_2("#fig_2_4_2_PHL",fig_2_4_2_data,"Philippines");
                 createFig_2_4_2("#fig_2_4_2_TJK",fig_2_4_2_data,"Tajikistan");
                 createFig_2_4_2("#fig_2_4_2_ZWE",fig_2_4_2_data,"Zimbabwe");
                 createFig_2_4_3("#fig_2_4_3_global",fig_2_4_3_data,"Global",400);
                 createFig_2_4_3("#fig_2_4_3_euro",fig_2_4_3_data,"European Region",250);
                 createFig_2_4_3("#fig_2_4_3_afro",fig_2_4_3_data,"African Region",250);
                 createFig_2_4_3("#fig_2_4_3_emro",fig_2_4_3_data,"Eastern Mediterranean Region",250);
                 createFig_2_4_3("#fig_2_4_3_amro",fig_2_4_3_data,"Region of the Americas",250);
                 createFig_2_4_3("#fig_2_4_3_wpro",fig_2_4_3_data,"Western Pacific Region",250);
                 createFig_2_4_3("#fig_2_4_3_searo",fig_2_4_3_data,"South-East Asia Region",250);
                 
                   createFig_2_4_4("#fig_2_4_4_global",fig_2_4_4_global,"Global",500);
  createFig_2_4_4("#fig_2_4_4_afro",fig_2_4_4_regional,"African Region",250);
  createFig_2_4_4("#fig_2_4_4_amro",fig_2_4_4_regional,"Region of the Americas",250);
  createFig_2_4_4("#fig_2_4_4_searo",fig_2_4_4_regional,"South-East Asia Region",250);
  createFig_2_4_4("#fig_2_4_4_euro",fig_2_4_4_regional,"European Region",250);
  createFig_2_4_4("#fig_2_4_4_emro",fig_2_4_4_regional,"Eastern Mediterranean Region",250);
  createFig_2_4_4("#fig_2_4_4_wpro",fig_2_4_4_regional,"Western Pacific Region",250);

                 createFig_2_4_5("#fig_2_4_5_AGO",fig_2_4_5_data, "Angola",250);
                 createFig_2_4_5("#fig_2_4_5_PRK",fig_2_4_5_data, "Democratic People's Republic of Korea",250);
                 createFig_2_4_5("#fig_2_4_5_KGZ",fig_2_4_5_data, "Kyrgyzstan",250);
                 createFig_2_4_5("#fig_2_4_5_NGA",fig_2_4_5_data, "Nigeria",250);
                 createFig_2_4_5("#fig_2_4_5_MDA",fig_2_4_5_data, "Republic of Moldova",250);
                 createFig_2_4_5("#fig_2_4_5_UKR",fig_2_4_5_data, "Ukraine",250);
                 createFig_2_4_5("#fig_2_4_5_AZE",fig_2_4_5_data, "Azerbaijan",250);
                 createFig_2_4_5("#fig_2_4_5_COD",fig_2_4_5_data, "Democratic Republic of the Congo",250);
                 createFig_2_4_5("#fig_2_4_5_MNG",fig_2_4_5_data, "Mongolia",250);
                 createFig_2_4_5("#fig_2_4_5_PAK",fig_2_4_5_data, "Pakistan",250);
                 createFig_2_4_5("#fig_2_4_5_RUS",fig_2_4_5_data, "Russian Federation",250);
                 createFig_2_4_5("#fig_2_4_5_UZB",fig_2_4_5_data, "Uzbekistan",250);
                 createFig_2_4_5("#fig_2_4_5_BGD",fig_2_4_5_data, "Bangladesh",250);
                 createFig_2_4_5("#fig_2_4_5_IND",fig_2_4_5_data, "India",250);
                 createFig_2_4_5("#fig_2_4_5_MOZ",fig_2_4_5_data, "Mozambique",250);
                 createFig_2_4_5("#fig_2_4_5_PNG",fig_2_4_5_data, "Papua New Guinea",250);
                 createFig_2_4_5("#fig_2_4_5_SOM",fig_2_4_5_data, "Somalia",250);
                 createFig_2_4_5("#fig_2_4_5_VNM",fig_2_4_5_data, "Viet Nam",250);
                 createFig_2_4_5("#fig_2_4_5_BLR",fig_2_4_5_data, "Belarus",250);
                 createFig_2_4_5("#fig_2_4_5_IDN",fig_2_4_5_data, "Indonesia",250);
                 createFig_2_4_5("#fig_2_4_5_MMR",fig_2_4_5_data, "Myanmar",250);
                 createFig_2_4_5("#fig_2_4_5_PER",fig_2_4_5_data, "Peru",250);
                 createFig_2_4_5("#fig_2_4_5_ZAF",fig_2_4_5_data, "South Africa",250);
                 createFig_2_4_5("#fig_2_4_5_ZMB",fig_2_4_5_data, "Zambia",250);
                 createFig_2_4_5("#fig_2_4_5_CHN",fig_2_4_5_data, "China",250);
                 createFig_2_4_5("#fig_2_4_5_KAZ",fig_2_4_5_data, "Kazakhstan",250);
                 createFig_2_4_5("#fig_2_4_5_NPL",fig_2_4_5_data, "Nepal",250);
                 createFig_2_4_5("#fig_2_4_5_PHL",fig_2_4_5_data, "Philippines",250);
                 createFig_2_4_5("#fig_2_4_5_TJK",fig_2_4_5_data, "Tajikistan",250);
                 createFig_2_4_5("#fig_2_4_5_ZWE",fig_2_4_5_data, "Zimbabwe",250);

                 
                 createFig_2_4_7("#fig_2_4_7",fig_2_4_7_data,"Year started on treatment");
                 createFig_2_4_7("#fig_2_4_8",fig_2_4_8_data,"");
                 
                 createFig_2_4_11("#fig_2_4_11_global",fig_2_4_11_data, 400, "Global");
                 createFig_2_4_11("#fig_2_4_11_AFR",fig_2_4_11_data, 250, "African Region");
                 createFig_2_4_11("#fig_2_4_11_AMR",fig_2_4_11_data, 250, "Region of the Americas");
                 createFig_2_4_11("#fig_2_4_11_SEA",fig_2_4_11_data, 250, "South-East Asia Region");
                 createFig_2_4_11("#fig_2_4_11_EUR",fig_2_4_11_data, 250, "European Region");
                 createFig_2_4_11("#fig_2_4_11_EMR",fig_2_4_11_data, 250, "Eastern Mediterranean Region");
                 createFig_2_4_11("#fig_2_4_11_WPR",fig_2_4_11_data, 250, "Western Pacific Region");

                 createFig_2_4_12("#fig_2_4_12_AGO",fig_2_4_12_data, 250, "Angola");
                 createFig_2_4_12("#fig_2_4_12_PRK",fig_2_4_12_data, 250, "Democratic People's Republic of Korea");
                 createFig_2_4_12("#fig_2_4_12_KGZ",fig_2_4_12_data, 250, "Kyrgyzstan");
                 createFig_2_4_12("#fig_2_4_12_NGA",fig_2_4_12_data, 250, "Nigeria");
                 createFig_2_4_12("#fig_2_4_12_MDA",fig_2_4_12_data, 250, "Republic of Moldova");
                 createFig_2_4_12("#fig_2_4_12_UKR",fig_2_4_12_data, 250, "Ukraine");
                 createFig_2_4_12("#fig_2_4_12_AZE",fig_2_4_12_data, 250, "Azerbaijan");
                 createFig_2_4_12("#fig_2_4_12_COD",fig_2_4_12_data, 250, "Democratic Republic of the Congo");
                 createFig_2_4_12("#fig_2_4_12_MNG",fig_2_4_12_data, 250, "Mongolia");
                 createFig_2_4_12("#fig_2_4_12_PAK",fig_2_4_12_data, 250, "Pakistan");
                 createFig_2_4_12("#fig_2_4_12_RUS",fig_2_4_12_data, 250, "Russian Federation");
                 createFig_2_4_12("#fig_2_4_12_UZB",fig_2_4_12_data, 250, "Uzbekistan");
                 createFig_2_4_12("#fig_2_4_12_BGD",fig_2_4_12_data, 250, "Bangladesh");
                 createFig_2_4_12("#fig_2_4_12_IND",fig_2_4_12_data, 250, "India");
                 createFig_2_4_12("#fig_2_4_12_MOZ",fig_2_4_12_data, 250, "Mozambique");
                 createFig_2_4_12("#fig_2_4_12_PNG",fig_2_4_12_data, 250, "Papua New Guinea");
                 createFig_2_4_12("#fig_2_4_12_SOM",fig_2_4_12_data, 250, "Somalia");
                 createFig_2_4_12("#fig_2_4_12_VNM",fig_2_4_12_data, 250, "Viet Nam");
                 createFig_2_4_12("#fig_2_4_12_BLR",fig_2_4_12_data, 250, "Belarus");
                 createFig_2_4_12("#fig_2_4_12_IDN",fig_2_4_12_data, 250, "Indonesia");
                 createFig_2_4_12("#fig_2_4_12_MMR",fig_2_4_12_data, 250, "Myanmar");
                 createFig_2_4_12("#fig_2_4_12_PER",fig_2_4_12_data, 250, "Peru");
                 createFig_2_4_12("#fig_2_4_12_ZAF",fig_2_4_12_data, 250, "South Africa");
                 createFig_2_4_12("#fig_2_4_12_ZMB",fig_2_4_12_data, 250, "Zambia");
                 createFig_2_4_12("#fig_2_4_12_CHN",fig_2_4_12_data, 250, "China");
                 createFig_2_4_12("#fig_2_4_12_KAZ",fig_2_4_12_data, 250, "Kazakhstan");
                 createFig_2_4_12("#fig_2_4_12_NPL",fig_2_4_12_data, 250, "Nepal");
                 createFig_2_4_12("#fig_2_4_12_PHL",fig_2_4_12_data, 250, "Philippines");
                 createFig_2_4_12("#fig_2_4_12_TJK",fig_2_4_12_data, 250, "Tajikistan");
                 createFig_2_4_12("#fig_2_4_12_ZWE",fig_2_4_12_data, 250, "Zimbabwe");


});

```

